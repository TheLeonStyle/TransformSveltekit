import{d as se,t as u,h as re,a as c,s as $,c as B}from"../chunks/OQvQ4M4C.js";import{a0 as ie,a1 as D,c as oe,_ as le,a5 as r,a8 as C,a2 as ce,a3 as ne,a4 as _,b as t,f as A,a6 as i,a7 as L,a9 as q}from"../chunks/BrGj9poG.js";import{i as ve,s as de,a as _e}from"../chunks/DMjzTZlO.js";import{e as R,i as T}from"../chunks/Mc3Rjreu.js";import{c as E,s as p}from"../chunks/BLfM7RU7.js";import{s as F,S as N,M as H}from"../chunks/BJw3UchU.js";var pe=u('<meta name="description" content="Предлагаем комплексный ремонт: малярные, плиточные, штукатурные и электромонтажные работы. Работаем по всей Москве и МО.">'),ue=(b,n)=>n("Все"),fe=(b,n,g)=>n(t(g)),me=u('<button type="button" aria-controls="works-list"> </button>'),he=u(`<li class="works__item svelte-12a13az"><svg role="img" width="100%" height="346" aria-labelledby="loading-aria" aria-busy="true" viewBox="0 0 710 346" preserveAspectRatio="none"><title id="loading-aria">Загрузка...</title><rect x="0" y="0" width="100%" height="100%" clip-path="url(#clip-path)" style="fill: url('#fill');"></rect><defs><clipPath id="clip-path"><rect x="48" y="8" rx="3" ry="3" width="88" height="6"></rect><rect x="48" y="26" rx="3" ry="3" width="52" height="6"></rect><rect x="0" y="56" rx="3" ry="3" width="410" height="6"></rect><rect x="0" y="72" rx="3" ry="3" width="380" height="6"></rect><rect x="0" y="88" rx="3" ry="3" width="178" height="6"></rect><circle cx="20" cy="20" r="20"></circle><rect x="0" y="0" rx="10" ry="10" width="710" height="346"></rect></clipPath><linearGradient id="fill"><stop offset="0.599964" stop-color="#f3f3f3" stop-opacity="1"><animate attributeName="offset" values="-2; -2; 1" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate></stop><stop offset="1.59996" stop-color="#ecebeb" stop-opacity="1"><animate attributeName="offset" values="-1; -1; 2" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate></stop><stop offset="2.59996" stop-color="#f3f3f3" stop-opacity="1"><animate attributeName="offset" values="0; 0; 3" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate></stop></linearGradient></defs></svg></li>`),be=u('<li class="works__item svelte-12a13az"><div class="works__text svelte-12a13az"><h3 class="works__title svelte-12a13az"> </h3> <p class="works__subtitle svelte-12a13az"> </p></div> <div class="works__content svelte-12a13az"><div class="works__media svelte-12a13az"><!></div> <span class="works__logo icon-logo svelte-12a13az"></span> <div class="works__media svelte-12a13az"><!></div></div></li>'),ge=u('<section class="works svelte-12a13az" aria-labelledby="works-heading"><div class="works__container svelte-12a13az"><h2 id="works-heading" class="works__heading heading svelte-12a13az">Наши работы</h2> <p class="works__subheading svelte-12a13az">Уже успешно преобразили</p> <nav class="works__filters svelte-12a13az" aria-label="Фильтры по категориям"><button type="button" aria-controls="works-list">Все</button> <!></nav> <ul class="works__items svelte-12a13az" aria-live="polite"><!></ul></div></section>');function Ce(b,n){ie(n,!0);const[g,J]=de(),v=()=>_e(E,"$currentCategory",g),K=n.data.categories.map(e=>e.title);let P=D(oe([])),f=D(!0);const G=e=>E.set(e);le(async()=>{A(f,!0);let e=`${N}/api/works?sort[0]=createdAt:desc&populate=*`;v()!=="Все"&&(e+=`&filters[category][title]=${encodeURIComponent(v())}`);const s=await(await fetch(e)).json();A(P,s.data,!0),A(f,!1)});var y=ge();re(e=>{var a=pe();ne.title="Услуги и цены на ремонт под ключ в Москве — Преображение",c(e,a)});var I=r(y),w=_(r(I),4),m=r(w);let M;m.__click=[ue,G];var O=_(m,2);R(O,17,()=>K,T,(e,a)=>{var s=me();let d;s.__click=[fe,G,a];var o=r(s,!0);i(s),C(l=>{d=F(s,1,"works__filter-btn svelte-12a13az",null,d,l),p(s,"aria-pressed",t(a)===v()),$(o,t(a))},[()=>({active:t(a)===v()})]),c(e,s)}),i(w);var k=_(w,2),Q=r(k);{var V=e=>{var a=B(),s=L(a);R(s,16,()=>Array(4),T,(d,o)=>{var l=he();c(d,l)}),c(e,a)},W=e=>{var a=B(),s=L(a);R(s,17,()=>t(P),T,(d,o)=>{var l=be(),x=r(l),h=r(x),X=r(h,!0);i(h);var S=_(h,2),Y=r(S,!0);i(S),i(x);var U=_(x,2),z=r(U),Z=r(z);const ee=q(()=>`${N}${t(o).before.url}`);H(Z,{get src(){return t(ee)},get mime(){return t(o).before.mime},alt:"Начальная работа",label:"Было"}),i(z);var j=_(z,4),te=r(j);const ae=q(()=>`${N}${t(o).before.url}`);H(te,{get src(){return t(ae)},get mime(){return t(o).before.mime},alt:"Конечная работа",label:"Стало"}),i(j),i(U),i(l),C(()=>{p(l,"aria-labelledby",`work-title-${t(o).id??""}`),p(h,"id",`work-title-${t(o).id??""}`),$(X,t(o).title),$(Y,t(o).subtitle)}),c(d,l)}),c(e,a)};ve(Q,e=>{t(f)?e(V):e(W,!1)})}i(k),i(I),i(y),C(e=>{M=F(m,1,"works__filter-btn svelte-12a13az",null,M,e),p(m,"aria-pressed",v()==="Все"),p(k,"aria-busy",t(f))},[()=>({active:v()==="Все"})]),c(b,y),ce(),J()}se(["click"]);export{Ce as component};
